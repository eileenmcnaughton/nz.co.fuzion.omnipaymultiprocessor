{% extends "layout.twig" %}

{% set title = gateway.name~": "~method~"()" %}
{% block content %}

    <p>The charge will be created like so:</p>
    <pre>$gateway = GatewayFactory::create('{{ gateway.shortName }}');
$response = $gateway->{{ method }}($params);</pre>

    <form method="post" class="form-horizontal">

        <h2>Request Parameters</h2>

        <p>The following parameters are available. Not all options are required by all gateways.</p>
        <p><span class="label label-info">Note</span> Normally these parameters would be generated by your application and not set via form input.</p>

        {% for key in ["amount", "currency", "description", "transactionId", "transactionReference", "cardReference", "returnUrl", "cancelUrl", "notifyUrl", "issuer"] %}

            <div class="control-group">
                <label class="control-label" for="params_{{key}}">{{ key }}</label>
                <div class="controls">
                    <input type="text" name="params[{{key}}]" id="params_{{key}}" value="{{params[key]|default}}" />
                </div>
            </div>

        {% endfor %}

        {% if card is defined %}

            <h2>Credit Card Parameters</h2>

            <p>The following credit card parameters are available. Normally you will assign these
                directly from POST data.</p>
            <p><span class="label label-important">Important</span> Never store raw credit card details in your application! Instead, you should pass them straight to the gateway.</p>

            {% for key in ["firstName", "lastName", "number", "expiryMonth", "expiryYear", "startMonth", "startYear", "cvv",
                "issueNumber", "address1", "address2", "city", "postcode", "state", "country", "phone", "email"] %}

                <div class="control-group">
                    <label class="control-label" for="card_{{key}}">{{ key }}</label>
                    <div class="controls">
                        <input type="text" name="card[{{key}}]" id="card_{{key}}" value="{{card[key]|default}}" />
                    </div>
                </div>

            {% endfor %}

        {% endif %}

        <div class="form-actions"><button type="submit" class="btn">Submit</button></div>

    </form>

{% endblock %}
